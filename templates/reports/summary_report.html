{% extends "reports/base_report.html" %}

{% block title %}Summary Report - {{ project_name }}{% endblock %}

{% block header_title %}üìã Summary Report{% endblock %}

{% block content %}
    {% if quality_metrics %}
        {% include "reports/quality_overview.html" %}
        
        {% if complex_files %}
        <h2>‚ö†Ô∏è Most Complex Files</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>File</th>
                        <th>Lines of Code</th>
                        <th>Complexity Score</th>
                        <th>Functions</th>
                        <th>Classes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for file in complex_files %}
                    <tr>
                        <td><code>{{ file.file_path }}</code></td>
                        <td>{{ file.lines_of_code }}</td>
                        <td>
                            <span class="badge {% if file.complexity_score > 20 %}badge-danger{% elif file.complexity_score > 10 %}badge-warning{% else %}badge-info{% endif %}">
                                {{ file.complexity_score|floatformat:1 }}
                            </span>
                        </td>
                        <td>{{ file.function_count }}</td>
                        <td>{{ file.class_count }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}
        
        <h2>üéØ Recommendations</h2>
        <div class="list-group">
            {% if quality_metrics.security_issues_count > 0 %}
            <div class="list-group-item">
                <span>üîí Address {{ quality_metrics.security_issues_count }} security issues</span>
                <span class="badge badge-danger">High Priority</span>
            </div>
            {% endif %}
            
            {% if quality_metrics.dead_code_items_count > 0 %}
            <div class="list-group-item">
                <span>üßπ Remove {{ quality_metrics.dead_code_items_count }} dead code items</span>
                <span class="badge badge-warning">Medium Priority</span>
            </div>
            {% endif %}
            
            {% if quality_metrics.duplicate_blocks_count > 0 %}
            <div class="list-group-item">
                <span>üîÑ Refactor {{ quality_metrics.duplicate_blocks_count }} duplicate code blocks</span>
                <span class="badge badge-info">Low Priority</span>
            </div>
            {% endif %}
            
            {% if quality_metrics.complex_functions_count > 0 %}
            <div class="list-group-item">
                <span>‚ö° Simplify {{ quality_metrics.complex_functions_count }} complex functions</span>
                <span class="badge badge-warning">Medium Priority</span>
            </div>
            {% endif %}
            
            {% if quality_metrics.documented_functions < quality_metrics.total_functions %}
            <div class="list-group-item">
                <span>üìö Document {{ quality_metrics.total_functions|add:quality_metrics.documented_functions|add:"-"|add:quality_metrics.documented_functions }} functions</span>
                <span class="badge badge-info">Low Priority</span>
            </div>
            {% endif %}
        </div>
        
    {% else %}
        {% if error_message %}
            <div class="alert alert-danger">
                <strong>Error:</strong> {{ error_message }}
            </div>
        {% else %}
            <div class="alert alert-warning">
                <strong>Notice:</strong> Analysis data is not yet available. Please run an analysis first.
            </div>
        {% endif %}
    {% endif %}
{% endblock %} 
